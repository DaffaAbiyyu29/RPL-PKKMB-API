<!doctype html>
<html lang="en" dir="ltr">
<head runat="server">
	<!-- Google Tag Manager -->
	<script>
		(function (w, d, s, l, i) {
			w[l] = w[l] || []; w[l].push({
				'gtm.start':
					new Date().getTime(), event: 'gtm.js'
			}); var f = d.getElementsByTagName(s)[0],
				j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
					'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
		})(window, document, 'script', 'dataLayer', 'GTM-MPB2J6QQ');</script>
	<!-- End Google Tag Manager -->

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>PKKMB Politeknik Astra</title>
	<link rel="icon" href="/assets/Images/logo/astratech.ico" />
	<link rel="shortcut icon" href="/assets/Images/logo/astratech.ico" />
	<link href="/assets/Plugins/MDB-Pro_4.14.1/css/bootstrap.min.css" rel="stylesheet" />
	<link href="/assets/Plugins/MDB-Pro_4.14.1/css/mdb.min.css" rel="stylesheet" />
	<link href="/assets/Plugins/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet" />
	<link href="/assets/Plugins/fontawesome-free-5.11.2-web/css/fontawesome.min.css" rel="stylesheet" />
	<link href="/assets/Plugins/fontawesome-free-5.11.2-web/css/solid.min.css" rel="stylesheet" />
	<link href="/assets/Plugins/fontawesome-free-5.11.2-web/css/regular.min.css" rel="stylesheet" />
	<link href="/assets/Plugins/fontawesome-free-5.11.2-web/css/brands.min.css" rel="stylesheet" />
	<link href="/assets/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
	<link href="/assets/Styles/Style.css" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap">

	<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
	<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" />
	<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>

	<script src="/assets/Scripts/jquery-ui-1.13.2.min.js"></script>
	<script src="/assets/Plugins/sweetalert2/dist/sweetalert2.min.js"></script>
	<script src="/assets/Plugins/fontawesome-free-5.11.2-web/js/fontawesome.min.js"></script>
	<script src="/assets/Plugins/MDB-Pro_4.14.1/js/bootstrap.min.js"></script>
	<script src="/assets/Plugins/MDB-Pro_4.14.1/js/mdb.min.js"></script>
	<script src="/assets/Plugins/Highcharts-7.2.1/code/highcharts.js"></script>
	<script src="/assets/Plugins/Highcharts-7.2.1/code/highcharts-more.js"></script>

	<script>
		var jq = jQuery.noConflict();
	</script>
</head>
<body>
	<form id="form1" runat="server" enctype="multipart/form-data">
		<asp:ScriptManager runat="server"></asp:ScriptManager>

		<!-- Google Tag Manager (noscript) -->
		<noscript>
			<iframe b-vmmy0jt31e src="https://www.googletagmanager.com/ns.html?id=GTM-MPB2J6QQ"
					height="0" width="0" style="display: none; visibility: hidden"></iframe>
		</noscript>
		<!-- End Google Tag Manager (noscript) -->
		<nav b-vmmy0jt31e class="navbar navbar-expand-lg navbar-light light">
			<a class="navbar-brand" style="padding: 5px 15px;" href="/">
				<img src="/assets/Images/logo/astratech.png" alt="Logo Politeknik Astra" style="height: 45px;" />
			</a>
			<button b-vmmy0jt31e class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-555" aria-controls="navbarSupportedContent-555" aria-expanded="false" aria-label="Toggle navigation">
				<span b-vmmy0jt31e class="navbar-toggler-icon"></span>
			</button>
			<div b-vmmy0jt31e class="collapse navbar-collapse" id="navbarSupportedContent-555">
				<ul b-vmmy0jt31e class="navbar-nav ml-auto">
					<li b-vmmy0jt31e class="nav-item mr-3 mahasiswabaru">
						<a class="nav-link" style="font-weight: bold;" href="/Mahasiswa/Dashboard">Dashboard</a>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 mahasiswabaru">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Informasi</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a class="hovercolor" style="font-weight: bold;" href="/jadwal">Jadwal</a>
							<a class="hovercolor" style="font-weight: bold;" href="/tugas">Tugas</a>
							<a class="hovercolor" style="font-weight: bold;" href="/absensi">Absensi</a>
							<a class="hovercolor" style="font-weight: bold;" href="/JamPlusMinus">Jam Plus / Minus</a>
							<a class="hovercolor" style="font-weight: bold;" href="/sikap">Sikap</a>
							<a class="hovercolor" style="font-weight: bold;" href="/kelompok">Kelompok</a>
							<a class="hovercolor" style="font-weight: bold;" href="/ruangan">Ruangan</a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-3 mahasiswabaru">
						<a class="nav-link" style="font-weight: bold;" href="/Mahasiswa/Evaluasi">Evaluasi</a>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-3 mahasiswabaru">
						<a class="nav-link" style="font-weight: bold;" href="/kelulusan">Kelulusan</a>
					</li>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 mahasiswabaru">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Hai,  <span b-vmmy0jt31e id="showUsernameMhs"></span> (<span b-vmmy0jt31e id="showRoleMhs"></span>)</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a b-vmmy0jt31e class="hovercolor" style="font-weight: bold;" href="../Akun/Ubah/KSK002">Ubah Akun</a>
							<a b-vmmy0jt31e class="nav-link font-weight-bold waves-effect waves-light white-text rounded-3" style="padding: 8px 15px; background-color: #ed302f;" onclick="logout(event)"><b b-vmmy0jt31e style="font-weight: bold;">Logout</b></a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-3 panitiakesekretariatan">
						<a class="nav-link" style="font-weight: bold;" href="/panitiakesekretariatan">Dashboard</a>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 panitiakesekretariatan">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Informasi</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a class="hovercolor" style="font-weight: bold;" href="/jadwal">Jadwal</a>
							<a class="hovercolor" style="font-weight: bold;" href="/kelompok">Kelompok</a>
							<a class="hovercolor" style="font-weight: bold;" href="/ruangan">Ruangan</a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-3 panitiakesekretariatan">
						<a class="nav-link" style="font-weight: bold;" href="/tugas">Tugas</a>
					</li>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 panitiakesekretariatan">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Nilai</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a class="hovercolor" style="font-weight: bold;" href="/tugas">Tugas</a>
							<a class="hovercolor" style="font-weight: bold;" href="/sikap">Sikap</a>
							<a class="hovercolor" style="font-weight: bold;" href="/JamPlusMinus">Jam Plus / Minus</a>
							<a class="hovercolor" style="font-weight: bold;" href="/absensi">Absensi</a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-3 panitiakesekretariatan">
						<a class="nav-link" style="font-weight: bold;" href="/evaluasi">Evaluasi</a>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-3 panitiakesekretariatan">
						<a class="nav-link" style="font-weight: bold;" href="/kelulusan">Kelulusan</a>
					</li>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 panitiakesekretariatan">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Hai,  <span b-vmmy0jt31e id="showUsernameKsk"></span> (<span b-vmmy0jt31e id="showRoleKsk"></span>)</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a b-vmmy0jt31e class="nav-link font-weight-bold waves-effect waves-light white-text rounded-3" style="padding: 8px 15px; background-color: #ed302f;" onclick="logout(event)"><b b-vmmy0jt31e style="font-weight: bold;">Logout</b></a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-3 picpkkmb">
						<a class="nav-link" style="font-weight: bold;" href="/picpkkmb">Dashboard</a>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 picpkkmb">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Informasi</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a class="hovercolor" style="font-weight: bold;" href="/jadwal">Jadwal</a>
							<a class="hovercolor" style="font-weight: bold;" href="/kelompok">Kelompok</a>
							<a class="hovercolor" style="font-weight: bold;" href="/ruangan">Ruangan</a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 picpkkmb">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Kesekretariatan</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a class="hovercolor" style="font-weight: bold;" href="/panitiakesekretariatan">Daftar Panitia</a>
							<a class="hovercolor" style="font-weight: bold;" href="/panitiakesekretariatan/verifikasiksk">Verifikasi Panitia</a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 picpkkmb">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Mahasiswa Baru</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a class="hovercolor" style="font-weight: bold;" href="/tugas">Tugas</a>
							<a class="hovercolor" style="font-weight: bold;" href="/absensi">Absensi</a>
							<a class="hovercolor" style="font-weight: bold;" href="/JamPlusMinus">Jam Plus / Minus</a>
							<a class="hovercolor" style="font-weight: bold;" href="/sikap">Sikap</a>
							<a class="hovercolor" style="font-weight: bold;" href="/kelulusan">Kelulusan</a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-3 picpkkmb">
						<a class="nav-link" style="font-weight: bold;" href="/evaluasi">Evaluasi</a>
					</li>
					<li b-vmmy0jt31e class="nav-item dropdown mr-3 picpkkmb">
						<a b-vmmy0jt31e class="nav-link dropdown-toggle" style="font-weight: bold;" id="navbarDropdownMenuLink-Informasi" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Hai,  <span b-vmmy0jt31e id="showUsernamePic"></span> (<span b-vmmy0jt31e id="showRolePic"></span>)</a>
						<div b-vmmy0jt31e class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink-Informasi">
							<a b-vmmy0jt31e class="nav-link font-weight-bold waves-effect waves-light white-text rounded-3" style="padding: 8px 15px; background-color: #ed302f;" onclick="logout(event)"><b b-vmmy0jt31e style="font-weight: bold;">Logout</b></a>
						</div>
					</li>
					<li b-vmmy0jt31e class="nav-item mr-2 login">
						<a class="nav-link font-weight-bold waves-effect waves-light white-text rounded-3" style="padding: 8px 15px; background-color: #0059AB;" href="/Akun/Login"><b b-vmmy0jt31e style="font-weight: bold;">Login</b></a>
					</li>
				</ul>
			</div>
		</nav>
		<div b-vmmy0jt31e class="container-fluid" style="padding-top: 50px;">
			<!-- Adjust the value according to your needs -->
				<div class="row">
		<div class="col-lg">
			<div class="my-3" style="margin-top: 40px;">
				<a class="btn" style="background-color:#0059ab; color:white;" href="/tugas/tambahtugas">Tambah Tugas</a>
			</div>
		</div>
	</div>

<div class="row justify-content-center mb-5">
	<div class="col-lg">
		<div class="card">
			<h5 class="card-header white-text py-4 mb-4" style="background-color: #0059AB;">
				Tugas Mahasiswa Baru
			</h5>
			<div class="card-body pt-1">
				<table class="table table-hover table-striped table-sm" style="width:100%" id="tabellist">
					<thead>
						<tr>
							<th scope="col">No</th>
							<th scope="col">NIM</th>
							<th scope="col">Nama Tugas</th>
							<th scope="col">Tanggal Pemberian</th>
							<th scope="col">Tugas</th>
							<th scope="col">Deadline</th>
							<th scope="col">Deskripsi</th>
								<th scope="col">Aksi</th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
	</div>
</div>

<script>
	loadTable()

	function formatDateForDisplay(dateString) {
		const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
		const formattedDate = new Date(dateString).toLocaleDateString('id-ID', options);
		return formattedDate;
	}

	function loadTable() {
		var hostname = "https://localhost:7087/";
		var url = hostname + "getalltugas";
		var method = "GET";
		var counter = 1;

		$.ajax({
			url: url,
			method: method,
			contentType: "application/json",
			success: function (data) {
				$.each(data, function (key, val) {
					var filePath = "C:\\RPL\\PKKMB-API\\File_Tugas\\TugasMahasiswa\\" + val.tgs_filetugas;
					var fileName = val.tgs_filetugas.split('\\').pop();
					var downloadtugas = '<td><a href="#" class="download-link" data-file="' + fileName + '">' + fileName + '</a></td>'
					var unggahnilai = '<button class="btn btn-primary btn-unggah-tugas" type="button" data-toggle="modal" data-target="#myModal" data-nomhs="' + val.dts_nopendaftaran + '"><i class="fa fa-pencil-alt" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Unggah Tugas"></button>'
					detailData.push([counter, val.dts_nopendaftaran, val.mhs_namalengkap, val.mhs_gender, val.mhs_programstudi, val.mhs_kategori, downloadtugas, val.dts_nilaitugas, unggahnilai])
					counter++;
				});

				jq('#tabellist').DataTable({
					data: detailData
				});

				$('.download-link').on('click', function (e) {
					e.preventDefault();
					var fileName = $(this).data('file');
					downloadFile(fileName);
				});


				var list = data.data;
				list.forEach(function (item) {
					var filePath = "C:\\RPL\\PKKMB-API\\File_Tugas\\TugasMahasiswa\\" + item.tgs_filetugas;
					var fileName = item.tgs_filetugas.split('\\').pop();

					var newRow = '<tr>' +
						'<td>' + counter + '</td>' +
						'<td>' + item.tgs_nim + '</td>' +
						'<td>' + item.tgs_namatugas + '</td>' +
						'<td>' + formatDateForDisplay(item.tgs_tglpemberiantugas) + '</td>' +
						'<td><a href="#" class="download-link" data-file="' + fileName + '">' + fileName + '</a></td>' +
						'<td>' + formatDateForDisplay(item.tgs_deadline) + '</td>' +
						'<td>' + item.tgs_deskripsi + '</td>' +
						'<td>' +
						("Fasilitator" == "Fasilitator" ?
							'<a class="btn btn-primary" href="/Tugas/UbahTugas/' + item.tgs_idtugas + '" data-toggle="tooltip" data-placement="top" title="Ubah Tugas"><i class="fa fa-pencil-alt" aria-hidden="true"></i></a> ' : '') +
						("Fasilitator" == "Mahasiswa" ?
							'<a class="btn btn-primary" href="/Tugas/PengumpulanTugas/' + item.tgs_idtugas + '" data-toggle="tooltip" data-placement="top" title="Lihat Tugas"><i class="fa fa-eye" aria-hidden="true"></i></a>' : '') +
						("Fasilitator" == "Fasilitator" ?
							'<a class="btn btn-primary" href="/Tugas/PenilaianTugas/' + item.tgs_idtugas + '" data-toggle="tooltip" data-placement="top" title="Lihat Tugas"><i class="fa fa-eye" aria-hidden="true"></i></a>' : '') +
						'</td>' +
						'</tr>';

					$('#tbody').append(newRow);
					counter++;
				});

				$('.download-link').on('click', function (e) {
					e.preventDefault();
					var fileName = $(this).data('file');
					downloadFile(fileName);
				});
			},
		});
	}

	function downloadFile(fileName) {
		var url = "https://localhost:7087/Tugas/Download";

		fetch(url, {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json',
			},
			body: JSON.stringify(fileName),
		})
			.then(response => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}
				return response.blob();
			})
			.then(blob => {
				var url = URL.createObjectURL(blob);
				var a = document.createElement('a');
				a.href = url;
				a.download = fileName;
				document.body.appendChild(a);
				a.click();
				document.body.removeChild(a);
			})
			.catch(error => {
				console.error('There was a problem with the fetch operation:', error);
			});
	}
</script>

		</div>
		<div b-vmmy0jt31e class="footer">

			<div b-vmmy0jt31e class="row">
				<div b-vmmy0jt31e class="col-lg-4 socialmedia" style="padding: 20px 40px; text-align: left;">
					<h6 b-vmmy0jt31e style="font-weight: bold; margin-bottom: 15px;">POLITEKNIK ASTRA</h6>
					<p b-vmmy0jt31e>
						<b b-vmmy0jt31e>Kampus Cikarang:</b><br b-vmmy0jt31e />
						Jl. Gaharu Blok F-3 Delta Silicon 2 Lippo Cikarang, Kel. Cibatu, Kec. Cikarang Selatan, Bekasi, Jawa Barat 17530
					</p>
					<p b-vmmy0jt31e>
						<b b-vmmy0jt31e>Kampus Sunter:</b><br b-vmmy0jt31e />
						Komplek PT Astra International	 Tbk. Gedung B, Jl. Gaya Motor Raya No. 8, Sunter II, Jakarta 14330
					</p>
				</div>
				<div b-vmmy0jt31e class="col-lg-4 socialmedia" style="padding: 20px 40px; text-align: left;">
					<h6 b-vmmy0jt31e style="font-weight: bold;">WAKTU LAYANAN</h6>
					<h6 b-vmmy0jt31e>Senin - Jumat (08:00 - 16:00 WIB)</h6>
					<br b-vmmy0jt31e />
					<h6 b-vmmy0jt31e style="font-weight: bold;">LINK CEPAT</h6>
					<a b-vmmy0jt31e href="https://goo.gl/maps/5VCNFxoCRRUwBF547" style="text-decoration: none; color: white;" target="_blank">
						<h6 b-vmmy0jt31e>- Lokasi Kampus</h6>
					</a>
					<a b-vmmy0jt31e href="https://sia.polytechnic.astra.ac.id" style="text-decoration: none; color: white;" target="_blank">
						<h6 b-vmmy0jt31e>- Sistem Informasi Akademik</h6>
					</a>
					<a b-vmmy0jt31e href="Page_Login.aspx" style="text-decoration: none; color: white;" target="_blank">
						<h6 b-vmmy0jt31e>- Login Akun PMB</h6>
					</a>
				</div>
				<div b-vmmy0jt31e class="col-lg-4 socialmedia" style="padding: 20px 40px; text-align: left;">
					<h6 b-vmmy0jt31e style="margin-bottom: 20px;">
						<span b-vmmy0jt31e style="font-weight: bold;">Telepon</span> : (021) 5022722<br b-vmmy0jt31e />
						<span b-vmmy0jt31e style="font-weight: bold;">Whatsapp</span> : 0812 9558 2134 (message only)<br b-vmmy0jt31e />
						<span b-vmmy0jt31e style="font-weight: bold;">Email</span> : pmb@polytechnic.astra.ac.id<br b-vmmy0jt31e />
						<span b-vmmy0jt31e style="font-weight: bold;">Website</span> : https://www.polytechnic.astra.ac.id
					</h6>
					<a b-vmmy0jt31e class="btn-floating btn-md btn-ins" style="margin: 10px 5px;" role="button" onclick="window.open('https://www.instagram.com/astrapolytechnic/', '_blank');"><i b-vmmy0jt31e class="fab fa-instagram"></i></a>
					<a b-vmmy0jt31e class="btn-floating btn-md btn-yt" style="margin: 10px 5px;" role="button" onclick="window.open('https://www.youtube.com/c/PolmanAstrachannel', '_blank');"><i b-vmmy0jt31e class="fab fa-youtube"></i></a>
					<a b-vmmy0jt31e class="btn-floating btn-md btn-fb" style="margin: 10px 5px;" role="button" onclick="window.open('https://www.facebook.com/Astrapolytechnic/', '_blank');"><i b-vmmy0jt31e class="fab fa-facebook-f"></i></a>
					<a b-vmmy0jt31e class="btn-floating btn-md btn-tw" style="margin: 10px 5px;" role="button" onclick="window.open('https://twitter.com/PoliteknikAstra/', '_blank');"><i b-vmmy0jt31e class="fab fa-twitter"></i></a>
					<a b-vmmy0jt31e class="btn-floating btn-md btn-whatsapp" style="margin: 10px 5px;" role="button" onclick="window.open('https://api.whatsapp.com/send/?phone=6281295582134', '_blank');"><i b-vmmy0jt31e class="fab fa-whatsapp"></i></a>
					<a b-vmmy0jt31e class="btn-floating btn-md btn-vr" style="margin: 10px 5px;" role="button" onclick="window.open('https://virtual-tour.polytechnic.astra.ac.id/', '_blank');"><i b-vmmy0jt31e class="fas fa-vr-cardboard"></i></a>
					<p b-vmmy0jt31e class="mt-3 mb-0">&copy; 2024 Politeknik Astra</p>
				</div>
			</div>
		</div>
	</form>

	<script>

		$('.nav-item').hide();
		$('.nav-item.login').show();

		var token = getCookie("token");

		function getCookie(name) {
			var nameEQ = name + "=";
			var cookies = document.cookie.split(';');

			for (var i = 0; i < cookies.length; i++) {
				var cookie = cookies[i].trim();
				if (cookie.startsWith(nameEQ)) {
					return cookie.substring(nameEQ.length, cookie.length);
				}
			}

			return null; // Return null if the cookie is not found
		}

		function validate() {
			if (getCookie("token") != null) {
				$.ajax({
					url: 'https://localhost:7087/ValidateToken',
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
						'token': token // Pass the token in the request headers
					},
					success: function (data) {
						var user = [];
						if (data.status === 200) {
							const decodedPayload = decodeJwt(token);
							if (decodedPayload.role == 'Mahasiswa') {
								$('.nav-item.mahasiswabaru').show();
								$('.nav-item.login').hide();
								var showUsernameMhs = document.getElementById('showUsernameMhs');
								showUsernameMhs.textContent = decodedPayload.name;
								var showRoleMhs = document.getElementById('showRoleMhs');
								showRoleMhs.textContent = decodedPayload.role;
							} else if (decodedPayload.role == 'Fasilitator' || decodedPayload.role == 'KSK') {
								$('.nav-item.panitiakesekretariatan').show();
								$('.nav-item.login').hide();
								var showUsernameKsk = document.getElementById('showUsernameKsk');
								showUsernameKsk.textContent = decodedPayload.name;
								var showRoleKsk = document.getElementById('showRoleKsk');
								showRoleKsk.textContent = decodedPayload.role;
							} else if (decodedPayload.role == 'PIC PKKMB') {
								$('.nav-item.picpkkmb').show();
								$('.nav-item.login').hide();
								var showUsernamePic = document.getElementById('showUsernamePic');
								showUsernamePic.textContent = decodedPayload.name;
								var showRolePic = document.getElementById('showRolePic');
								showRolePic.textContent = decodedPayload.role;
							}
						}
						else {
							deleteCookie('token');
						}
					}, error: function (xhr, status) {
						deleteCookie('token');
					},
				});
			}
		}

		function hideContentAndShowAlert() {
			if (window.location.href != "https://localhost:7240/" && window.location.href != "https://localhost:7240/Akun/Login" && window.location.href != "https://localhost:7240/Akun/DaftarAkun" && window.location.href != "https://localhost:7240/Akun/LupaKataSandi") {
				$('body').css('background-color', 'white'); // Set background color to black (you can also use 'white')
				$('body').html('');

				setTimeout(function () {
					showAlertAndRefresh();
				}, 0000);
			}
		}

		function showAlertAndRefresh() {

			Swal.fire({
				position: "top-end",
				icon: "error",
				title: "Halaman Tidak Tersedia, Kembali ke Menu Awal",
				showConfirmButton: false,
				timer: 2000
			}).then(() => {
				window.location.href = '../';
			});
		}

		$(document).ready(function () {
			validate();
		});

		function decodeJwt(token) {
			const base64Url = token.split('.')[1];
			const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
			const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {
				return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
			}).join(''));

			return JSON.parse(jsonPayload);
		}

		function deleteCookie(name) {
			document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
		}

		function logout(event) {
			event.preventDefault();
			deleteCookie('token');
			window.location.href = "https://localhost:7240/";
		}
	</script>

	<script>
		$(document).ready(function () {
			// Tentukan tinggi dari elemen navigasi
			var navHeight = $('.navbar').outerHeight();

			// Terapkan properti CSS position: sticky pada elemen navigasi
			$('.navbar').css({
				'position': 'sticky',
				'top': '0',
				'width': '100%',
				'z-index': '1000',
			});
		});
	</script>




</body>
</html>